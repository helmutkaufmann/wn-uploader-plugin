# ===================================
#  Form Field Definitions
# ===================================

fields:
  title:
    label: Title
    type: text
    span: left

  form_id:
    label: Form ID
    type: text
    span: right
    readOnly: true

  description:
    label: Description
    type: textarea
    size: medium

  upload_dir:
    label: Upload Directory
    type: mediafinder
    mode: folder
    span: left

  timezone:
    label: Timezone
    type: dropdown
    options: getTimezoneOptions
    span: right
    default: Europe/Zurich

  start_date:
    label: Start Date and Time
    type: datepicker
    mode: datetime
    useTimezone: false
    span: left
    default: 2025-01-01 00:00:00
    comment: Date and time the upload interface becomes available.

  end_date:
    label: End Date and Time
    type: datepicker
    mode: datetime
    useTimezone: false
    span: right
    default: 2099-12-31 23:59:59
    comment: Date and time the upload interface becomes unavailable.

  auto_upload_enabled:
    label: Auto-upload files immediately
    type: switch
    span: left
    default: true
    comment: "If enabled, files are uploaded as they are dropped by the user. Note that the editor is not availaable with this option being active."

tabs:
  fields:
    use_image_editor:
      label: Enable Uppy Image Editor
      type: switch
      tab: Pre-Processing
      span: left
      default: true
      trigger:
          action: disable
          field: auto_upload_enabled
          condition: checked

    preserve_exif:
      label: Preserve EXIF Metadata
      type: switch
      tab: Pre-Processing
      span: right
      default: false

    client_resize_enabled:
      label: Enable client-side resizing and compression
      type: switch
      tab: Pre-Processing
      span: left
      default: false

    allowed_types: 
      label: Allowed File Types
      type: text
      span: left
      tab: Pre-Processing
      default: jpg,png,jpeg,gif,bmp,tif,tiff,webp

    client_resize_max_width:
      label: Max width (px)
      type: number
      tab: Resizing & Compression
      span: left
      default: 1920
      trigger:
        action: show
        field: client_resize_enabled
        condition: checked

    client_resize_max_height:
      label: Max height (px)
      type: number
      tab: Resizing & Compression
      span: right
      default: 1080
      trigger:
        action: show
        field: client_resize_enabled
        condition: checked

    client_resize_quality:
      label: JPEG/WebP Quality (0.0â€“1.0)
      type: number
      tab: Resizing & Compression
      span: left
      default: 0.8
      attributes:
        step: 0.05
        min: 0
        max: 1
      trigger:
        action: show
        field: client_resize_enabled
        condition: checked
      
    restricted:
      label: Restrict access to specific users
      type: switch
      span: left
      default: false
      tab: Restrictions
      comment: Only users from the list with ?user=<token> can open and upload.

    section_filesize:
      label: Upload Size Restrictions
      type: section
      tab: Restrictions
      comment: Set 0 or leave empty for unlimited.

    max_file_size:
      label: Maximum File Size (MB)
      type: number
      tab: Restrictions
      default: 0
      span: left
      attributes:
        min: 0
        step: 1

    max_total_file_size:
      label: Maximum Total Upload Size (MB)
      type: number
      tab: Restrictions
      default: 0
      span: right
      attributes:
        min: 0
        step: 1

    users@update:
      label: Users
      type: relationmanager
      tab: Users
      span: full
      trigger:
        action: hide
        field: restricted
        condition: unchecked
        recordsPerPage: 20
