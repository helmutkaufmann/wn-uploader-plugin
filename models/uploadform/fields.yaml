# ===================================
#  Form Field Definitions
# ===================================

fields:
  title:
    label: Title
    type: text
    span: left

  form_id:
    label: Form ID
    type: text
    span: right
    readOnly: true

  description:
    label: Description
    type: textarea
    size: large

  upload_dir:
    label: Upload Directory
    type: mediafinder
    mode: folder
    span: left

  allowed_types:
    label: Allowed File Types
    type: text
    span: right
    default: jpg,png,jpeg,gif,bmp,tif,tiff,webp

  start_date:
    label: Start Date and Time
    type: datepicker
    mode: datetime
    useTimezone: false
    span: left
    default: 2025-01-01 00:00:00
    comment: Date and time the upload interface becomes available.

  end_date:
    label: End Date and Time
    type: datepicker
    mode: datetime
    useTimezone: false
    span: right
    default: 2099-12-31 23:59:59
    comment: Date and time the upload interface becomes unavailable.

  timezone:
    label: Timezone
    type: dropdown
    options: getTimezoneOptions
    span: left
    default: Europe/Zurich

  auto_upload_enabled:
    label: Auto-upload files immediately
    type: switch
    span: right
    default: true
    comment: "If enabled, files are uploaded as they are dropped by the user."

tabs:
  fields:
    use_image_editor:
      label: Enable Uppy Image Editor
      type: switch
      tab: Pre-Processing
      span: left
      default: true

    client_resize_enabled:
      label: Enable client-side resize/compress
      type: switch
      tab: Pre-Processing
      span: left
      default: false

    client_resize_max_width:
      label: Max width (px)
      type: number
      tab: Pre-Processing
      span: left
      default: 1920
      trigger:
        action: show
        field: client_resize_enabled
        condition: checked

    client_resize_max_height:
      label: Max height (px)
      type: number
      tab: Pre-Processing
      span: right
      default: 1080
      trigger:
        action: show
        field: client_resize_enabled
        condition: checked

    client_resize_quality:
      label: JPEG/WebP Quality (0.0â€“1.0)
      type: number
      tab: Pre-Processing
      span: left
      default: 0.8
      attributes:
        step: 0.05
        min: 0
        max: 1
      trigger:
        action: show
        field: client_resize_enabled
        condition: checked

    preserve_exif:
      label: Preservation of EXIF Metadata
      type: switch
      tab: Restrictions
      default: false

    section_filesize:
      label: Upload Size Restrictions
      type: section
      tab: Restrictions
      comment: Set 0 or leave empty for unlimited.

    max_file_size:
      label: Maximum File Size (MB)
      type: number
      tab: Restrictions
      default: 0
      span: left
      attributes:
        min: 0
        step: 1

    max_total_file_size:
      label: Maximum Total Upload Size (MB)
      type: number
      tab: Restrictions
      default: 0
      span: right
      attributes:
        min: 0
        step: 1

    restricted:
      label: Restrict access to specific users
      type: switch
      span: left
      default: false
      tab: Users
      comment: Only users from the list with ?user=<token> can open & upload.

    users:
      label: Users
      type: relation
      tab: Users
      span: full
      deferredBinding: true
      view:
        list: $/mercator/uploader/models/uploaduser/columns.yaml
        toolbarButtons: add|create|remove
        showSearch: true
      manage:
        form: $/mercator/uploader/models/uploaduser/fields.yaml
        list: $/mercator/uploader/models/uploaduser/columns.yaml
        recordsPerPage: 20
      trigger:
        action: show
        field: restricted
        condition: checked
